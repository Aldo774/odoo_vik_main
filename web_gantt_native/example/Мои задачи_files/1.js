BX.namespace("Tasks.Util");BX.Tasks.Util.Query=BX.Tasks.Base.extend({options:{url:false},methods:{construct:function(){this.vars={batch:[]}},destruct:function(){this.vars=null;this.opts=null},add:function(e,t,s){if(typeof e=="undefined"){throw new ReferenceError("Method name was not provided")}e=e.toString();if(e.length==0){throw new ReferenceError("Method name must not be empty")}if(typeof t=="undefined"||!BX.type.isPlainObject(t)){t={}}if(typeof t=="undefined"||!BX.type.isPlainObject(s)){s={}}this.vars.batch.push({OPERATION:e,ARGUMENTS:t,PARAMETERS:s})},deleteAll:function(){this.vars.batch=[]},execute:function(){if(this.opts.url===false){throw new ReferenceError("URL was not provided")}if(this.vars.batch.length>0){BX.ajax({url:this.opts.url,method:"post",dataType:"json",async:true,processData:true,emulateOnload:true,start:true,data:{CSRF:BX.bitrix_sessid(),SITE_ID:BX.message("SITE_ID"),ACTION:this.vars.batch},cache:false,onsuccess:BX.delegate(function(e){try{this.fireEvent("executed",[{success:e.SUCCESS,clientProcessErrors:[],serverProcessErrors:e.ERROR,data:e.DATA}]);if(e.SUCCESS){this.deleteAll()}}catch(t){BX.debug(t)}},this),onfailure:BX.delegate(function(e,t){this.fireEvent("executed",[{success:false,clientProcessErrors:[[e,t]],serverProcessErrors:[],data:[]}])},this)})}}}});
//# sourceMappingURL=1.map.js